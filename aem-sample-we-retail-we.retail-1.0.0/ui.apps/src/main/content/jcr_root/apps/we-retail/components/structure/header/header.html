<!--/*
    Copyright 2016 Adobe Systems Incorporated
  
    Licensed under the Apache License, Version 2.0 (the "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at
  
        http://www.apache.org/licenses/LICENSE-2.0
  
    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
*/-->
<sly data-sly-use.header="header.js">
    <div class="navbar navbar-inverse navbar-fixed-top hidden-xs">
        <div class="container-fluid">
            <ul class="nav navbar-nav navbar-left">
                <li><a href="#" data-toggle="modal" data-target=".we-LanguageModal" title="${header.currentLanguage.name}"><i class="we-lang-icon we-lang-icon-${header.currentLanguage.countrycode}"></i> ${header.currentLanguage.languagecode}</a></li>
            </ul>
           <ul class="nav navbar-nav navbar-right">
                <li class="we-retail-not-anonymous hidden-header"><a href="${header.profilePath}.html"><img class="avatar-header we-retail-not-anonymous" id="header-avatar" src="" alt="" title="">Profile</a></li>
                <li class="we-retail-not-anonymous hidden-header"><a href="#"><i class="fa fa-heart-o"></i> Wishlist <span class="badge">0</span></a></li>
                <li class="we-retail-not-anonymous hidden-header"><a href="${header.messagingPath}.html"><i class="fa fa-envelope-o"></i> Messages <span class="badge">0</span></a></li>
                <li class="we-retail-not-anonymous hidden-header"><a href="${header.notificationPath}.html"><i class="fa fa-flag-o"></i> Notifications <span class="badge" id="scf-js-notificationsUnreadCount" data-siteurl="/content/we-retail/community/en">0</span></a></li>
                <li class="we-retail-not-anonymous hidden-header" data-sly-resource="${@ resourceType='we-retail/components/structure/navcart'}"></li>
                <li class="we-retail-not-anonymous hidden-header" data-sly-test="${header.isModerator}"><a href="/content/we-retail/community/en/moderation.html">Moderation</a></li>
                <li class="we-retail-anonymous hidden-header"><a href="#" data-toggle="modal" data-target=".we-SignInModal">Login</a></li>
                <li class="we-retail-not-anonymous hidden-header"><a href="/system/sling/logout.html?resource=${header.currentPath}.html">Log out</a></li>
            </ul>
        </div>
    </div>

    <div class="container">
        <nav class="navbar navbar-${header.theme} navbar-absolute-top">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                        data-target="#we-example-navbar-collapse-inverse" aria-expanded="false">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span> <span class="icon-bar"></span>
                </button>

                <button type="button" class="navbar-toggle navbar-toggle-close collapsed" data-toggle="collapse"
                        data-target="#we-example-navbar-collapse-inverse" aria-expanded="false">
                    <span class="sr-only">Toggle navigation</span>
                    <i class="we-Icon we-Icon--close"></i>
                </button>

                <a class="navbar-brand" href="${header.languageRoot}">we.<strong>Retail</strong></a>
                <div class="pull-right visible-xs" data-sly-resource="${@ resourceType='we-retail/components/structure/navcart', selectors='mobilebutton'}"></div>
            </div>
            
            <!-- /.navbar-header -->
            <div class="collapse navbar-collapse width" id="we-example-navbar-collapse-inverse">
                <ul  class="nav navbar-nav navbar-center">
                    <li class="visible-xs"><a href="${header.languageRoot.path}.html">we.<strong class="text-primary">Retail</strong></a></li>
                    <sly data-sly-list.item="${header.items}">
                        <li class="${item.selected ? 'active' : ''}">
                        <a href="${ item.page.path }.html">${item.page.title}</a>

                            <ul data-sly-list.subitem="${item.children}" class="navbar-nav-subitems">
                                <li class="${subitem.selected ? 'active' : ''}">
                                    <a href="${ subitem.page.path }.html">${subitem.page.title}</a>
                                </li>
                            </ul>
                        </li>
                    </sly>
                     <li class="visible-xs divider" role="separator"></li>
                    <li class="visible-xs we-retail-anonymous hidden-header"><a href="#" data-toggle="modal" data-target=".we-SignInModal">Login</a></li>
            	    <li class="visible-xs we-retail-not-anonymous hidden-header"><a href="/system/sling/logout.html?resource=${header.currentPath}.html">Log out</a></li>
                    <li class="visible-xs we-retail-not-anonymous hidden-header"><a href="${header.profilePath}.html">Profile</a></li>
                    <li class="visible-xs we-retail-not-anonymous hidden-header"><a href="${header.messagingPath}.html" class="visible-xs">Messages <span class="badge pull-right">0</span></a></li>
                    <li class="visible-xs we-retail-not-anonymous hidden-header"><a href="${header.notificationPath}.html" class="visible-xs">Notifications <span class="badge pull-right">0</span></a></li>
                    <li class="visible-xs we-retail-not-anonymous hidden-header"><a href="#" class="visible-xs">Wishlist <span class="badge pull-right">0</span></a></li>
                    <li class="visible-xs"><a href="#" data-toggle="modal" data-target=".we-LanguageModal"><i class="we-lang-icon we-lang-icon-${header.currentLanguage.countrycode}"></i> ${header.currentLanguage.languagecode}</a></li>
                </ul>
            </div>

            <!-- /.navbar-collapse -->
            <div class="navbar-right-outside">
                <a href="#" class="btn ${header.theme == 'inverse' ? 'btn-primary' : ''}" data-toggle="modal" data-target="#navbar-search">
                    <span class="sr-only">Search</span><i class="we-Icon we-Icon--search" aria-hidden="true"></i>
                </a>
            </div>
            <!-- /.navbar-right-outside -->

            <span class="navbar-shutter"></span>
        </nav>
        <!-- /.navbar -->
    </div>

    <div class="we-SearchModal modal fade" id="navbar-search" role="dialog" data-color="primary">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <span><i class="we-Icon we-Icon--search"></i>Search anything really</span>
                    <button type="button" class="close" data-dismiss="modal"><span>Close search</span><i class="we-Icon we-Icon--close-alt"></i></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-12">
							<form id="form-search-input-inline" data-paths="[/content/usergenerated/asi/mongo/content/we-retail/community/en]" class="scf-js-searchform navbar-form navbar-left" role="search">
							    <div class="scf-quicksearch-form-group form-group">
									<input type="search" id="scf-js-quicksearch-input-inline" placeholder="Start typing..." data-dropdown="drop_search" aria-controls="drop_search" aria-expanded="false" name="input_value" class="we-SearchModal-input" value="" required="" autocomplete="off">
							        <input style="display:none" type="checkbox" class="scf-js-search-jcrtitle" value="jcr:title" checked>
								    <input style="display:none" type="checkbox" class="scf-js-search-jcrdescription" value="jcr:description" checked>
									<span role="status" aria-live="polite" class="ui-helper-hidden-accessible"></span>
							        <input type="hidden" name="resultPage" class="scf-js-seach-resultPage" value="/content/we-retail/community/en/search"></input>
									<input type="hidden" name="searchEndpoint" class="scf-js-search-endpoint" value="/content/we-retail/community/en/search/jcr:content/content/primary/searchresult"></input>
							    </div>
							</form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- /.we-SearchModal -->

    <div class="we-SignInModal modal fade" tabindex="-1" role="dialog" data-color="primary">
        <div class="modal-dialog modal-center">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title">LOGIN</h3>
                </div>
                <div class="modal-body">
                    <form class="we-SignInModal-form" method="POST" action="${header.signInPath}">
                        <div class="form-group">
                            <input class="form-control" type="text" name="j_username" placeholder="email address"/>
                        </div>
                        <div class="form-group">
                            <input class="form-control" type="password" name="j_password" placeholder="password"/>
                        </div>
                        <div class="form-group">
                            <button type="submit" class="btn btn-primary btn-action">Login</button>
                        </div>
                        <div class="form-group">
                            <a href="/content/we-retail/community/en/signin.html" class=""><img src="/etc/designs/we-retail/images/social/socialnetworks.png" alt="Social Login" width="150"></a>
                        </div>
                        <div class="form-group">
                            <a href="#" class="">Forgot your password?</a>
                        </div>
                        <input type="hidden" name="resource" value="${header.currentPath}.html"/>
                    </form>

                    <div>
                        <div class="form-group">
                            <h4 class="modal-title text-uppercase">Don't have an account?</h4>
                        </div>
                        <div class="form-group">
                            <a href="${header.signUpPath}.html" class="btn btn-primary btn-action">Register</a>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div><!-- /.we-SignInModal -->

    <div class="we-LanguageModal modal fade" tabindex="-1" role="dialog" data-color="primary">
        <div class="modal-dialog modal-center modal-sm">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title text-center">CHOOSE YOUR COUNTRY</h3>
                </div>
                <div class="modal-body">
                    <ul class="we-LanguagesList">
                        <li>
                            <i class="we-lang-icon we-lang-icon-us"></i><span><a href="/content/we-retail/us/en.html" class="${language.selected ? 'active' : ''}">English</a></span>
                        </li>
                        <li>
                            <i class="we-lang-icon we-lang-icon-fr"></i><span><a href="/content/we-retail/community/fr/forum.html" class="${language.selected ? 'active' : ''}">French</a></span>
                        </li>
                        <li>
                            <i class="we-lang-icon we-lang-icon-de"></i><span><a href="/content/we-retail/community/de/forum.html" class="${language.selected ? 'active' : ''}">German</a></span>
                        </li>
                        <li>
                            <i class="we-lang-icon we-lang-icon-jp"></i><span><a href="/content/we-retail/community/jp/forum.html" class="${language.selected ? 'active' : ''}">Japanese</a></span>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="modal-after">
                <a href="#" data-dismiss="modal"><i class="we-Icon we-Icon--close-alt"></i> Close</a>
            </div>
        </div>
    </div><!-- /.we-LanguageModal -->

</sly>